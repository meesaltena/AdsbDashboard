<CascadingValue Value=false Name="UsePopoverProvider">
    <MudThemeProvider @ref="@_mudThemeProvider" IsDarkMode="true" Theme="MyTheme"></MudThemeProvider>
</CascadingValue>

@code {

    private bool _isDarkMode;
    private MudThemeProvider _mudThemeProvider;
    public static MudTheme MyTheme => new()
        {
            Palette = new PaletteLight()
            {
                Primary = "#594AE2",
                AppbarBackground = "#594AE2"
            },
            PaletteDark = new PaletteDark()
            {
                Primary = "#594AE2",
                AppbarBackground = "#57535C",
            }
        };

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            _isDarkMode = await _mudThemeProvider.GetSystemPreference();
            StateHasChanged();
        }
    }
}